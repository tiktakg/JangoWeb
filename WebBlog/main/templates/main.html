<!DOCTYPE html>
<html>

<head>
    <title>Мой сайт</title>
</head>
<div>
    <div style="text-align: center;">
        {% if isAdmin %}
        <h2>Welcome back, admin !</h2>

        {% else %}
        <h2>Welcome back, user !</h2>
        {% endif %}
    </div>

    <body>
        <div style="text-align: right;">

            {% if isAdmin %}
            <input type="text" id="tagInput" placeholder="Поиск">
            <button onclick="findWithTag(true)">искать</button>
            {% else %}
            <input type="text" id="tagInput" placeholder="Поиск">
            <button onclick="findWithTag()">искать</button>

            {% endif %}


        </div>

        <div style=" overflow: auto; height: 600px; scrollbar-width: thin;">
            <p>
            <H3>Все посты</H3>
            </p>
            <form method="POST">
                <ul>
                    {% for post,id in posts.items %}
                    {% if isAdmin %}
                    <li>
                        <p><a onclick="goToPost('{{id}}')" href="AdminPost/?name={{ post }}">{{post}}</a></p>
                        <img src="https://via.placeholder.com/50x50"alt="Картинка">
                    </li>
                    {% else %}
                    <li>
                        <p><a onclick="goToPost('{{id}}')" href="post/?name={{ post }}">{{post}}</a></p>
                        <img src="https://via.placeholder.com/50x50" alt="Картинка">
                    </li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </form>

        </div>

        {% if isAdmin %}
        <div>
            <p>
                <button onclick="editNote()">добавить запись</button>
            <p><a href="http://127.0.0.1:8000/">выйти</a></p>
            </p>

        </div>
        {% endif %}
       
            <img id="my-image" src="https://via.placeholder.com/50x50" onclick="getUrl('123')" alt="test" />
            
           
        
    </body>

</html>



<script>

    function getUrl(img) 
    {
        console.log(img)

        const myImage = document.getElementById('my-image');
        myImage.src = URL.createObjectURL(img);

         

        
        // const img = document.createElement('img');

        // // Получаем URL-адрес Blob объекта
      

        // // Устанавливаем src атрибут img тега равным URL-адресу
        img.src = imageUrl;

        // // Добавляем тег img как дочерний элемент элемента myImageElement
        myImageElement.appendChild(img);


        // const img = document.createElement('img');
        // document.body.appendChild(img);
        // document.getElementById('my-image').appendChild(img);
    }
    function findWithTag(check) {
        var tag = document.getElementById('tagInput').value;
        if (check == true)
            var url = "?name=" + encodeURIComponent("root") + "&password=" + encodeURIComponent("root") + "&tag=" + encodeURIComponent(tag);
        else
            var url = "tag=" + encodeURIComponent(tag);


        window.location.href = url;

    }

    function editNote(postName) {

        var url = 'http://127.0.0.1:8000/main/makePost/?name='
        window.location.href = url;
    }
    function goToPost(postName) {

        document.cookie = "id=" + postName;
    }

</script>

